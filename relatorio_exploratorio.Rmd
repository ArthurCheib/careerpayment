---
title: "Salários EPPPGG - Análise Exploratória"
output: github_document
---

```{r include=FALSE}
library(tidyverse)
library(readxl)
library(data.table)
library(deflateBR)
library(scales)
```

Para acessar do meu PC:
```{r}
setwd("C:/Users/arthu/OneDrive/Trabalho SEE/Datasets/pay_servidores")
load("eppggs.RData")
```

Para acessar do PC do Trabalho
```{r}
setwd()
load()
```

### Checagem simples das variáveis numéricas (distribuição):

```{r echo=FALSE}
summary(eppggs_df_final)

eppggs_df_final %>%
  keep(is.numeric) %>% 
  gather() %>% 
  ggplot(aes(value)) +
  facet_wrap(~ key, scales = "free") +
  geom_histogram()
```

##  Verificar distribuição salarial da carreira por ano (tendência anual)
* a. Descontar cálculo anual da inflação usando 2013 como período-base
* b. Aumento percentual ano a ano da carreira (aumento real do salário)
* c. Verificar distribuição do aumento ao longos dos meses do ano (cada linha = ano; eixo x = mes)

```{r}
eppggs_df_final %>% 
  group_by(DATA_SALARIO) %>% 
  summarize(TOTAL_CARREIRA = sum(REM_POS_DEDUCOES)) %>% 
  ggplot(aes(DATA_SALARIO, TOTAL_CARREIRA)) +
  geom_col() +
  coord_flip() +
  scale_y_continuous(labels = dollar_format())
```


Para realizar a deflação dos valores reais:

library(deflateBR)
eppggs_df_final %>% mutate(reais_deflacionados = deflate(REM_POS_DEDUCOES, DATA_SALARIO, "01/2017", "ipca"))


## Quebrar análise por sexo:

* a. Inserir manualmente o sexo de cada pessoa
* b. Verificar avanço número da proporção homens x mulheres
* c. Verificar relação salarial entre os sexos (como fazer isso levando em conta a desprorporção)
* d. Qual foi o tempo médio gasto por um csapiano para assumir um cargo em até 02 anos ()

## Quebrar a análise por CSAP:
* Proporcionalmente, quanl CSAP tem hoje o melhor desempenho em:
* Permanência na carreira (prop. de quantos entraram e quantos saíram)
* Desempenho salarial global
* Rising stars (maior quantidade de cargos ou prop de csapianos com cargos)


### Visualização geral das variáveis numéricas:
```{r}
summary(eppggs_df_final)

eppggs_df_final %>%
  keep(is.numeric) %>% 
  gather() %>% 
  ggplot(aes(value)) +
  facet_wrap(~ key, scales = "free") +
  geom_histogram()
```

        